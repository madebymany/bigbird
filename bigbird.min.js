(function(){"use strict";function t(t,e){var i,n=this;i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){n.apply(this,arguments)},_.extend(i,n,e);var s=function(){this.constructor=i};return s.prototype=n.prototype,i.prototype=new s,t&&_.extend(i.prototype,t),i.__super__=n.prototype,i}function e(t){var e=t.match(/^(\S+)\s*(.*)$/);return{kind:e[1],selector:e[2]}}function i(t){return t.charAt(0).toUpperCase()+t.slice(1)}var n={};n.VERSION="0.3.4",n.Events=_.extend({},Eventable);var s=n.Initializer=function(t){var e=t.base||$(document.body);_.extend(this,{modules:{},module:e.data("module"),action:e.data("action")},t),this.initialize()};_.extend(s.prototype,{initialize:function(){this.execute("common","initialize"),this.execute(this.module,"initialize"),this.execute(this.module,this.action)},execute:function(t,e){var n,s;t&&e&&(n=this.modules[t]||this.modules[i(t)],_.isUndefined(n)||(s=n[e]||n[i(e)],_.isFunction(s)&&s()))},rerunAction:function(){this.execute(this.module,this.action)}});var o=n.Module=function(t){_.extend(this,t),this.el&&this.setElement(),this.proxied&&this.proxyMethods(),this.events&&this.attachEvents(),this.subscriptions&&this.subscribeToEvents(),this.initialize.call(this)};o.extend=t,_.extend(o.prototype,n.Events,{publish:_.bind(n.Events.trigger,n.Events),subscribe:_.bind(n.Events.on,n.Events),$el:null,_$els:{},initialize:function(){},proxyMethods:function(){_.bindAll.apply(null,_.union(this,this.proxied))},attachEvents:function(){var t,i;_.each(this.events,function(n,s){t=_.bind(this[n],this),i=e(s),i.selector?this.$el.on(i.kind,i.selector,t):this.$el.on(i.kind,t)},this)},subscribeToEvents:function(){_.each(this.subscriptions,function(t,e){this.subscribe(e,this[t],this)},this)},setElement:function(t){var e=t||this.el;this.$el=e instanceof $?e:$(e),this.el=this.$el[0],this.data=this.$el.data()},setElements:function(){_.each(this.$("[data-bb-el]"),this._setBBElement,this)},els:function(t,e){return this._getBBElement(t,!!e)[0]},$els:function(t,e){return this._getBBElement(t,!!e)},$:function(t){return this.$el.find(t)},destroy:function(){var t;_.each(this.events,function(i,n){t=e(n),t.selector?this.$el.off(t.kind,t.selector):this.$el.off(t.kind)},this),this.$el.remove()},_getBBElement:function(t,e){var i=this._$els[t];return(e||_.isUndefined(i))&&(i=this.$("[data-bb-el="+t+"]"),this._setBBElement(i)),i},_setBBElement:function(t){var e=$(t);this._$els[e.data("bbEl")]=e}}),"function"==typeof define&&define.amd?define(function(){return n}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports.BigBird=n):window.BigBird=n})();