(function(){"use strict";function t(t,e){var i,n=this;i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){n.apply(this,arguments)},_.extend(i,n,e);var s=function(){this.constructor=i};return s.prototype=n.prototype,i.prototype=new s,t&&_.extend(i.prototype,t),i.__super__=n.prototype,i}function e(t){var e=t.match(/^(\S+)\s*(.*)$/);return{kind:e[1],selector:e[2]}}function i(t){return t.charAt(0).toUpperCase()+t.slice(1)}var n=window.BigBird={},s=$(document.body);n.VERSION="0.3.3",n.Events=_.extend({},Eventable);var o=n.Initializer=function(t){var e=t.base||s;_.extend(this,{modules:{},module:e.data("module"),action:e.data("action")},t),s.ready(_.bind(this.initialize,this))};_.extend(o.prototype,{initialize:function(){this.execute("common","initialize"),this.execute(this.module,"initialize"),this.execute(this.module,this.action)},execute:function(t,e){var n,s;t&&e&&(n=this.modules[t]||this.modules[i(t)],_.isUndefined(n)||(s=n[e]||n[i(e)],_.isFunction(s)&&s()))},rerunAction:function(){this.execute(this.module,this.action)}});var h=n.Module=function(t){this.options=t,_.each(t,function(t,e){this[e]=t},this),this.el&&this.setElement(),this.subscriptions&&this.subscribeToEvents(),this.events&&this.delegateEvents(),this.proxied&&this.proxyFunctions(),this.initialize.apply(this,arguments)};h.extend=t,_.extend(h.prototype,n.Events,{publish:_.bind(n.Events.trigger,n.Events),subscribe:_.bind(n.Events.on,n.Events),$el:s,_$els:{},initialize:function(){},$:function(t){return this.$el.find(t)},proxyFunctions:function(){_.each(this.proxied,function(t){this[t]=_.bind(this[t],this)},this)},subscribeToEvents:function(){_.each(this.subscriptions,function(t,e){this.subscribe(e,this[t],this)},this)},delegateEvents:function(){var t,i;_.each(this.events,function(n,s){return t=_.bind(this[n],this),i=e(s),i.selector?(this.$el.on(i.kind,i.selector,t),void 0):(this.$el.on(i.kind,t),void 0)},this)},destroy:function(){var t,i=this.$el;_.each(this.events,function(n,s){t=e(s),t.selector&&(i=this.$(t.selector)),i.off(t.kind)},this)},setElement:function(t){var e=t||this.el;this.$el=e instanceof $?e:$(e),this.el=this.$el[0],this.data=this.$el.data()},setElements:function(){_.each(this.$("[data-bb-el]"),this._setBBElement,this)},els:function(t,e){return this._getBBElement(t,!!e)[0]},$els:function(t,e){return this._getBBElement(t,!!e)},_getBBElement:function(t,e){var i=this._$els[t];return(e||_.isUndefined(i))&&(i=this.$("[data-bb-el="+t+"]"),this._setBBElement(i)),i},_setBBElement:function(t){this._$els[t.data("bbEl")]=t}}),_.isFunction(window.define)&&define.amd&&define("bigbird",[],function(){return n})})();