// Big Bird
// v0.1.0
// by @cjbell88, @ninjabiscuit & @callumj_
(function(e,t){var n=this,r=n.BigBird={};r.$=e;var i=r.$({});r.$.subscribe=function(){i.on.apply(i,arguments)},r.$.unsubscribe=function(){i.off.apply(i,arguments)},r.$.publish=function(){i.trigger.apply(i,arguments)};var s=r.Initializer=function(e){this.application=e,this.initialize()};t.extend(s.prototype,{initialize:function(){this.body=document.body,this.module=this.body.getAttribute("data-module"),this.action=this.body.getAttribute("data-action"),this.common=this.application.Common||null,e(this.body).ready(t.bind(this.onDomReady,this))},onDomReady:function(){t.isNull(this.common)||this.execute("Common","initialize"),this.execute(this.module,"initialize"),this.execute(this.module,this.action)},execute:function(e,n){e=this.application[e];if(t.isUndefined(e))return!1;if(t.isUndefined(e[n])||!t.isFunction(e[n]))return!1;e[n].apply()}});var o=r.Controller=function(e){this._setElement(),this._setOptions(e||{}),this.subscriptions&&this.subscribeToEvents(),this.proxied&&this.proxyFunctions(),this.events&&this.delegateEvents(),this.initialize.apply(this,arguments)};t.extend(o.prototype,{$:function(e){return this.$el.find(e)},publish:r.$.publish,subscribe:r.$.subscribe,initialize:function(){},subscribeToEvents:function(){for(var e in this.subscriptions){var n=this.subscriptions[e];this.subscribe(e,t.bind(this[n],this))}},proxyFunctions:function(){var e=this.proxied.length;for(e;e--;){var n=this.proxied[e];t.isFunction(this[n])&&t.bind(this[n],this)}},delegateEvents:function(){for(var e in this.events){var n=this.events[e],r=t.bind(this[n],this),i=e.match(this.eventSplitter),s=i[1],o=i[2];o===""?this.$el.bind(s,r):this.$el.delegate(o,s,r)}},_setElement:function(){if(t.isUndefined(this.el))return!1;this.$el=this.el instanceof r.$?this.el:r.$(this.el),this.el=this.$el[0],this.data=this.$el.data()},_setOptions:function(e){this.options=e;for(var t in this.options)this[t]=this.options[t]}});var u=function(e,n){var r=this,i;e&&t.has(e,"constructor")?i=e.constructor:i=function(){r.apply(this,arguments)},t.extend(i,r,n);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&t.extend(i.prototype,e),i.__super__=r.prototype,i};o.extend=u})(jQuery,_);